# 数据库系统面试题

## 目录

## 概念

1. 你了解数据库类型有哪些吗？（1分）  
    解析：  
    数据库类型可以分为关系型数据库和非关系型数据库。关系型数据库就是使用表格来组织数据，数据以行和列的形式存储，并通过关联表
    来连接不同表中的数据，常见的关系型数据库如oracle,mysql,sqlserver。  
    另外一种非关系型数据库，又可以细分为键值对型，文档型等等。键值对类型，很好理解，就是类似于哈希表中的键值对来存储
    数据，这样的数据库有radis,memcached；文档型数据库就是将数据存储在一个个文档里，每个文档里的数据结构可以自由组织，大大增加了
    数据存储的灵活性，这样的数据库有mongodb等。

2. 主键是什么？外键是什么？各自有什么特点？（3分）  
    解析：主键就是表中用来标识唯一记录的列，主键不能重复，不能为空，一张表只能有一个主键（包括组合主键）。
    外键是一个表里的某列是另外一个表的主键，这列叫外键，通常用作表之间的关联，外键可以为空，一张表可以有多个外键。  

3. 对于Mysql来说，主键自增有什么好处？（1分，了解即可）  
   解析：可以有效提高性能。Mysql的存储方式是以页这个单位进行存储的，一页里的数据按照关键字进行排序存储（因为是B+树），
    假设每次添加的数据关键字都是递增的，那么如果一页里的数据满了，就创建新的页。但是如果新插入的数据的关键字排在当前页的当中，
    那么，mysql会从中间将数据分开，并创建新页，将后一半的数据转移到新页上，这个过程叫页分裂。这里存在着一定的性能消耗。
    所以主键最好还是自增，这样不会频繁进行页分裂的操作。

1. 磁盘的柱面号，盘面号，扇区号是什么？（1分，了解即可）  
   解析：柱面号标识了盘面上的几号磁道，盘面号标识了是几号盘面，扇区号标识了盘面上的几号扇区。具体看[这里](https://zhuanlan.zhihu.com/p/373313740)

2. 存储过程是什么？用什么来调用？（2分）  
   解析：存储过程就是用来专门做一件事的一段sql语句，它的特点是第一次编译之后不用再编译可以直接调用（1分）。
   存储过程可以由数据库本身调用，也可以通过第三方程序如java，C#程序调用（1分）。

3. 什么是函数，它与存储过程有什么不同？（2分）  
   数据库里的函数与编程语言中的函数类似，可以接受参数，执行一些操作，然后将操作结果返回（1分）。它与存储过程差不多，主要不同是，
   它必须指定一个返回值或者表数据，但存储过程没有这个限制（1分）。一般来说，存储过程实现的功能要复杂一点，而函数的实现的功能针对性比较强。

4. 视图是什么？视图与表有什么区别？（2分）  
   视图就是一张虚拟的表，它是基于select语句建立的（1分）。其与基本表的主要区别（讲出来一点就给1分）：  
   - 通过定义视图可以将频繁使用的SELECT语句保存以提高效率
   - 通过定义视图可以不对外公开数据表全部字段，增强数据的保密性
   - 通过定义视图可以使用户看到的数据更加清晰 

5. 什么是内连接、外连接、交叉连接？(3分)   
   多张表连接的时候一般是通过字段与字段之间的关系进行连接的，然而每张表里的这个字段情况不一样，所以不同的连接方式会造成不同的结果集。  
   一般来讲，内连接就是A表跟B表的连接字段，两个字段都必须存在且满足on的条件，然后这两条不同表中的记录就会合并然后加入到结果集（1分）。  
   外连接就是在内连接的基础上，再把A表剩余的记录和B表剩余的记录加入到结果集（1分）。  
   交叉连接就是指左（外）连接或者右（外）连接，我们以左连接举例，A表左连接B表，那么在两表内连接的基础上，再把A表剩余的记录加入到结果集（1分）
   右连接同理。  
 
6. mysql中varchar和char的区别（1分，了解即可）
   - char的长度不可变，varchar的长度可变
   - char的存取速度要比varchar快得多，但代价是会占用固定空间

7. sqlserver中varchar和nvarchar的区别(2分)
   varchar括号中的数字表示的是字符串大小，以一个字节为单位；nvarchar也表示的是字符串大小，以双字节为单位。
   可以简单理解为这个数字就表示能容纳的最大字符数，但需要注意的是，nvarchar(100)的100并不一定能容纳100个字符，
   因为nvarchar是Unicode编码的，unicode编码不是固定的双字节，也有四个字节表示一个字符的，所以也有可能出现到了100个双字节但没有100个字符的情况(2分)

8. 模糊查询通配符"%"和"_"的区别(1分，了解即可)  
   “%”表示任何字符可以出现任意次数，“_”表示匹配单个字符。

9. 事务是什么
    数据库事务是作为一个逻辑单元执行的一系列操作，这些操作要么全部执行，要么全部不执行。事务有四个属性，称为ACID，也就是原子性，一致性，隔离性和持久性。
    原子性：事务必须是原子工作单元，事务中的操作，要么全部执行，要么全部不执行
    一致性：事务必须使数据库从一个一致性状态变换到另外一个一致性状态。比如在银行中两个账户转账前后的储蓄总和不变，这就是从转账前的一致性状态转变为了转账后的一致性状态。保证事务的一致性，就是保证数据库的完整性约束没有被破坏。
    隔离性：不同事务可以并发执行互不干扰
    持久性：一个事务一旦被提交，它对数据的改变是永久性的

10. truncate和delete的区别
    1. delete可以带where，所以它可以条件删除，但truncate是删除整个表数据
    2. delete可以回滚，truncate不能回滚
    3. 高水位重置。意思就是表有一个高水位的概念，随着表记录不断增长，高水位也会提高，delete操作不会降低高水位，但truncate会重置，重置后再进行增删改操作就会提升一点速度
    
11. 数据库为什么加索引会查的快？  
    加了索引后数据库引擎会在内部维护一个数据结构，一般是B树类型的，在查询时，借助这个数据结构就能减少查询次数。

12. 什么情况下应不建立索引？
    - 表记录太少
    - 经常做增删改操作的表
    - 数据重复且分布平均的表字段
  
13. sqlserver默认隔离级别  
    sqlserver事务一共有四种隔离级别：
    - 未提交读:  
    - 已提交读
    - 可重复读
    - 可序列化
    默认隔离级别为已提交读。
   
